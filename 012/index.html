<script src='../helpers/erato.js'></script>
<script src='../helpers/getPrimeFactors.js'></script>

<script>
	function nthTriangle(n) {
		return (2 + (n - 1)) * n / 2;
	}
	
	var k = 100000,
		primes = erato.get(k);
	
	function getDivisorsNumber(n) {
		var factors = getPrimeFactors(n, primes), res = 1, counter = 1;

		for (var i = 1; i < factors.length; i++) {
			if (factors[i] != factors[i - 1]) {
				res *= counter + 1;
				counter = 1;
			} else {
				counter++;
			}
		};
		
		return res * (counter + 1);
	}
	
	var n = 500,
		i = 1;
		tri = 0;
	
	while((getDivisorsNumber(tri = nthTriangle(i++)) < n) && (i < k)) {}
	console.log(tri);
</script>